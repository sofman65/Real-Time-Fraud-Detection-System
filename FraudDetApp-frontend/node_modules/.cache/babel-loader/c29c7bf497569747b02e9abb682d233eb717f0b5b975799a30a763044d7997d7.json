{"ast":null,"code":"var _jsxFileName = \"/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/RealTimePrediction.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { Card, CardBody, CardFooter, Typography, Button } from \"@material-tailwind/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RealTimePrediction = () => {\n  _s();\n  const [predictions, setPredictions] = useState(null);\n  const [transaction, setTransaction] = useState(null);\n  const wsRef = useRef(null);\n  useEffect(() => {\n    // Initialize WebSocket connection only if it's not already set up\n    if (!wsRef.current || wsRef.current.readyState === WebSocket.CLOSED) {\n      const ws = new WebSocket(\"ws://localhost:8000/ws/fraud_detection/\");\n      wsRef.current = ws;\n\n      // Handle incoming WebSocket messages\n      ws.onmessage = event => {\n        const data = JSON.parse(event.data);\n        setPredictions(data.predictions);\n        setTransaction(data.transaction);\n      };\n\n      // Handle WebSocket errors\n      ws.onerror = error => {\n        console.error(\"WebSocket error:\", error);\n      };\n\n      // Cleanup function to close WebSocket when component unmounts\n      return () => {\n        if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n          wsRef.current.close();\n        }\n      };\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: transaction && predictions ? /*#__PURE__*/_jsxDEV(Card, {\n      placeholder: \"Loading...\",\n      className: \"w-full max-w-[800px]\",\n      children: [/*#__PURE__*/_jsxDEV(CardBody, {\n        placeholder: \"Loading...\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          variant: \"h5\",\n          className: \"mb-2 text-blue-700\",\n          children: \"Real-Time Fraud Prediction\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Transaction ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this), \" \", transaction.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this), \" $\", transaction.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), \" \", transaction.time]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: /*#__PURE__*/_jsxDEV(Line, {\n            data: {\n              labels: [\"Logistic\", \"Random Forest\", \"XGBoost\"],\n              datasets: [{\n                label: \"Fraud Prediction (0 = No Fraud, 1 = Fraud)\",\n                data: [predictions.logistic, predictions.random_forest, predictions.xgboost],\n                backgroundColor: [\"rgba(75, 192, 192, 0.2)\", \"rgba(255, 159, 64, 0.2)\", \"rgba(153, 102, 255, 0.2)\"],\n                borderColor: [\"rgba(75, 192, 192, 1)\", \"rgba(255, 159, 64, 1)\", \"rgba(153, 102, 255, 1)\"],\n                borderWidth: 2\n              }]\n            },\n            options: {\n              scales: {\n                y: {\n                  beginAtZero: true,\n                  ticks: {\n                    stepSize: 1\n                  }\n                }\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n        placeholder: \"Loading...\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          placeholder: \"Loading...\",\n          variant: \"gradient\",\n          className: \"bg-blue-500 text-white w-full\",\n          onClick: () => window.location.reload(),\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Card, {\n      placeholder: \"Loading...\",\n      className: \"w-full max-w-[800px]\",\n      children: /*#__PURE__*/_jsxDEV(CardBody, {\n        placeholder: \"Loading...\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          variant: \"h5\",\n          className: \"mb-2 text-blue-700\",\n          children: \"Waiting for Predictions...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          placeholder: \"Loading...\",\n          className: \"mb-4\",\n          children: \"Waiting for new transaction data to predict fraud...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(RealTimePrediction, \"6fuVoE92dBcfAfV3icKKDxcr9UQ=\");\n_c = RealTimePrediction;\nexport default RealTimePrediction;\nvar _c;\n$RefreshReg$(_c, \"RealTimePrediction\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Line","Card","CardBody","CardFooter","Typography","Button","jsxDEV","_jsxDEV","RealTimePrediction","_s","predictions","setPredictions","transaction","setTransaction","wsRef","current","readyState","WebSocket","CLOSED","ws","onmessage","event","data","JSON","parse","onerror","error","console","OPEN","close","className","children","placeholder","variant","fileName","_jsxFileName","lineNumber","columnNumber","id","amount","time","labels","datasets","label","logistic","random_forest","xgboost","backgroundColor","borderColor","borderWidth","options","scales","y","beginAtZero","ticks","stepSize","onClick","window","location","reload","_c","$RefreshReg$"],"sources":["/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/RealTimePrediction.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport {\n    Card,\n    CardBody,\n    CardFooter,\n    Typography,\n    Button,\n} from \"@material-tailwind/react\";\n\ninterface Transaction {\n    id: string;\n    amount: number;\n    time: string;\n}\n\ninterface Predictions {\n    logistic: number;\n    random_forest: number;\n    xgboost: number;\n}\n\n\n\nconst RealTimePrediction: React.FC = () => {\n    const [predictions, setPredictions] = useState<Predictions | null>(null);\n    const [transaction, setTransaction] = useState<Transaction | null>(null);\n    const wsRef = useRef<WebSocket | null>(null);\n\n    useEffect(() => {\n        // Initialize WebSocket connection only if it's not already set up\n        if (!wsRef.current || wsRef.current.readyState === WebSocket.CLOSED) {\n            const ws = new WebSocket(\"ws://localhost:8000/ws/fraud_detection/\");\n            wsRef.current = ws;\n\n            // Handle incoming WebSocket messages\n            ws.onmessage = (event) => {\n                const data = JSON.parse(event.data);\n                setPredictions(data.predictions);\n                setTransaction(data.transaction);\n            };\n\n            // Handle WebSocket errors\n            ws.onerror = (error) => {\n                console.error(\"WebSocket error:\", error);\n            };\n\n            // Cleanup function to close WebSocket when component unmounts\n            return () => {\n                if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n                    wsRef.current.close();\n                }\n            };\n        }\n    }, []);\n\n    return (\n        <div className=\"flex justify-center items-center h-screen\">\n            {transaction && predictions ? (\n                <Card placeholder=\"Loading...\"\n                    className=\"w-full max-w-[800px]\">\n                    <CardBody placeholder=\"Loading...\">\n                        <Typography placeholder=\"Loading...\" variant=\"h5\" className=\"mb-2 text-blue-700\">\n                            Real-Time Fraud Prediction\n                        </Typography>\n                        <Typography placeholder=\"Loading...\" className=\"mb-4\">\n                            <strong>Transaction ID:</strong> {transaction.id}\n                        </Typography>\n                        <Typography placeholder=\"Loading...\" className=\"mb-4\">\n                            <strong>Amount:</strong> ${transaction.amount}\n                        </Typography>\n                        <Typography placeholder=\"Loading...\" className=\"mb-4\">\n                            <strong>Time:</strong> {transaction.time}\n                        </Typography>\n\n                        <div className=\"mb-6\">\n                            <Line\n                                data={{\n                                    labels: [\"Logistic\", \"Random Forest\", \"XGBoost\"],\n                                    datasets: [\n                                        {\n                                            label: \"Fraud Prediction (0 = No Fraud, 1 = Fraud)\",\n                                            data: [\n                                                predictions.logistic,\n                                                predictions.random_forest,\n                                                predictions.xgboost,\n                                            ],\n                                            backgroundColor: [\n                                                \"rgba(75, 192, 192, 0.2)\",\n                                                \"rgba(255, 159, 64, 0.2)\",\n                                                \"rgba(153, 102, 255, 0.2)\",\n                                            ],\n                                            borderColor: [\n                                                \"rgba(75, 192, 192, 1)\",\n                                                \"rgba(255, 159, 64, 1)\",\n                                                \"rgba(153, 102, 255, 1)\",\n                                            ],\n                                            borderWidth: 2,\n                                        },\n                                    ],\n                                }}\n                                options={{\n                                    scales: {\n                                        y: {\n                                            beginAtZero: true,\n                                            ticks: {\n                                                stepSize: 1,\n                                            },\n                                        },\n                                    },\n                                }}\n                            />\n\n                        </div>\n                    </CardBody>\n                    <CardFooter placeholder=\"Loading...\">\n                        <Button\n                            placeholder=\"Loading...\"\n                            variant=\"gradient\"\n                            className=\"bg-blue-500 text-white w-full\"\n                            onClick={() => window.location.reload()}\n                        >\n                            Refresh\n                        </Button>\n                    </CardFooter>\n                </Card>\n            ) : (\n                <Card placeholder=\"Loading...\" className=\"w-full max-w-[800px]\">\n                    <CardBody placeholder=\"Loading...\">\n                        <Typography placeholder=\"Loading...\" variant=\"h5\" className=\"mb-2 text-blue-700\">\n                            Waiting for Predictions...\n                        </Typography>\n                        <Typography placeholder=\"Loading...\" className=\"mb-4\">\n                            Waiting for new transaction data to predict fraud...\n                        </Typography>\n                    </CardBody>\n                </Card>\n            )}\n        </div>\n    );\n};\n\nexport default RealTimePrediction;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SACIC,IAAI,EACJC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,MAAM,QACH,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAgBlC,MAAMC,kBAA4B,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAqB,IAAI,CAAC;EACxE,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAqB,IAAI,CAAC;EACxE,MAAMgB,KAAK,GAAGf,MAAM,CAAmB,IAAI,CAAC;EAE5CF,SAAS,CAAC,MAAM;IACZ;IACA,IAAI,CAACiB,KAAK,CAACC,OAAO,IAAID,KAAK,CAACC,OAAO,CAACC,UAAU,KAAKC,SAAS,CAACC,MAAM,EAAE;MACjE,MAAMC,EAAE,GAAG,IAAIF,SAAS,CAAC,yCAAyC,CAAC;MACnEH,KAAK,CAACC,OAAO,GAAGI,EAAE;;MAElB;MACAA,EAAE,CAACC,SAAS,GAAIC,KAAK,IAAK;QACtB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;QACnCX,cAAc,CAACW,IAAI,CAACZ,WAAW,CAAC;QAChCG,cAAc,CAACS,IAAI,CAACV,WAAW,CAAC;MACpC,CAAC;;MAED;MACAO,EAAE,CAACM,OAAO,GAAIC,KAAK,IAAK;QACpBC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MAC5C,CAAC;;MAED;MACA,OAAO,MAAM;QACT,IAAIZ,KAAK,CAACC,OAAO,IAAID,KAAK,CAACC,OAAO,CAACC,UAAU,KAAKC,SAAS,CAACW,IAAI,EAAE;UAC9Dd,KAAK,CAACC,OAAO,CAACc,KAAK,CAAC,CAAC;QACzB;MACJ,CAAC;IACL;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,oBACItB,OAAA;IAAKuB,SAAS,EAAC,2CAA2C;IAAAC,QAAA,EACrDnB,WAAW,IAAIF,WAAW,gBACvBH,OAAA,CAACN,IAAI;MAAC+B,WAAW,EAAC,YAAY;MAC1BF,SAAS,EAAC,sBAAsB;MAAAC,QAAA,gBAChCxB,OAAA,CAACL,QAAQ;QAAC8B,WAAW,EAAC,YAAY;QAAAD,QAAA,gBAC9BxB,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACC,OAAO,EAAC,IAAI;UAACH,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAEjF;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACb9B,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACF,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACjDxB,OAAA;YAAAwB,QAAA,EAAQ;UAAe;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACzB,WAAW,CAAC0B,EAAE;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC,eACb9B,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACF,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACjDxB,OAAA;YAAAwB,QAAA,EAAQ;UAAO;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,MAAE,EAACzB,WAAW,CAAC2B,MAAM;QAAA;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC,eACb9B,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACF,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACjDxB,OAAA;YAAAwB,QAAA,EAAQ;UAAK;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACzB,WAAW,CAAC4B,IAAI;QAAA;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,eAEb9B,OAAA;UAAKuB,SAAS,EAAC,MAAM;UAAAC,QAAA,eACjBxB,OAAA,CAACP,IAAI;YACDsB,IAAI,EAAE;cACFmB,MAAM,EAAE,CAAC,UAAU,EAAE,eAAe,EAAE,SAAS,CAAC;cAChDC,QAAQ,EAAE,CACN;gBACIC,KAAK,EAAE,4CAA4C;gBACnDrB,IAAI,EAAE,CACFZ,WAAW,CAACkC,QAAQ,EACpBlC,WAAW,CAACmC,aAAa,EACzBnC,WAAW,CAACoC,OAAO,CACtB;gBACDC,eAAe,EAAE,CACb,yBAAyB,EACzB,yBAAyB,EACzB,0BAA0B,CAC7B;gBACDC,WAAW,EAAE,CACT,uBAAuB,EACvB,uBAAuB,EACvB,wBAAwB,CAC3B;gBACDC,WAAW,EAAE;cACjB,CAAC;YAET,CAAE;YACFC,OAAO,EAAE;cACLC,MAAM,EAAE;gBACJC,CAAC,EAAE;kBACCC,WAAW,EAAE,IAAI;kBACjBC,KAAK,EAAE;oBACHC,QAAQ,EAAE;kBACd;gBACJ;cACJ;YACJ;UAAE;YAAArB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAED,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eACX9B,OAAA,CAACJ,UAAU;QAAC6B,WAAW,EAAC,YAAY;QAAAD,QAAA,eAChCxB,OAAA,CAACF,MAAM;UACH2B,WAAW,EAAC,YAAY;UACxBC,OAAO,EAAC,UAAU;UAClBH,SAAS,EAAC,+BAA+B;UACzC0B,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE;UAAA5B,QAAA,EAC3C;QAED;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC,gBAEP9B,OAAA,CAACN,IAAI;MAAC+B,WAAW,EAAC,YAAY;MAACF,SAAS,EAAC,sBAAsB;MAAAC,QAAA,eAC3DxB,OAAA,CAACL,QAAQ;QAAC8B,WAAW,EAAC,YAAY;QAAAD,QAAA,gBAC9BxB,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACC,OAAO,EAAC,IAAI;UAACH,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAEjF;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACb9B,OAAA,CAACH,UAAU;UAAC4B,WAAW,EAAC,YAAY;UAACF,SAAS,EAAC,MAAM;UAAAC,QAAA,EAAC;QAEtD;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACT;EACT;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC5B,EAAA,CApHID,kBAA4B;AAAAoD,EAAA,GAA5BpD,kBAA4B;AAsHlC,eAAeA,kBAAkB;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
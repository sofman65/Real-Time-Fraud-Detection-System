{"ast":null,"code":"var _jsxFileName = \"/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/Chatbot.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { Card, CardBody, CardFooter, Typography, Input, Button } from \"@material-tailwind/react\";\nimport ThreeScene from \"./ThreeScene\"; // Import the 3D scene\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatGPT = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(scrollToBottom, [messages]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    const userMessage = {\n      role: \"user\",\n      content: input\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInput(\"\");\n    setIsLoading(true);\n    let buffer = \"\";\n    const assistantMessage = {\n      role: \"assistant\",\n      content: \"\"\n    };\n    setMessages(prev => [...prev, assistantMessage]);\n    const eventSource = new EventSource(`http://localhost:8000/api/chatbot/?message=${encodeURIComponent(input)}`);\n    eventSource.onmessage = event => {\n      const responseObject = JSON.parse(event.data);\n      buffer += responseObject.content || \"\";\n      buffer = buffer.replace(/\\s+/g, \" \").trim();\n      setTimeout(() => {\n        setMessages(prev => {\n          const updated = [...prev];\n          updated[updated.length - 1].content = buffer;\n          return updated;\n        });\n      }, 100); // 100ms delay, adjust as needed\n    };\n    eventSource.onerror = error => {\n      console.log(\"Error with SSE connection:\", error);\n      eventSource.close();\n      setIsLoading(false);\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-[100vh] flex items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(ThreeScene, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      placeholder: undefined,\n      className: \"w-full max-w-[800px] h-[80vh] flex flex-col relative z-10 bg-opacity-70 backdrop-blur-lg\",\n      children: [/*#__PURE__*/_jsxDEV(CardBody, {\n        placeholder: undefined,\n        className: \"flex-grow overflow-y-auto p-4\",\n        children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `mb-4 ${message.role === \"user\" ? \"text-right\" : \"text-left\"}`,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            placeholder: undefined,\n            variant: \"paragraph\",\n            color: message.role === \"user\" ? \"blue\" : \"gray\",\n            className: `inline-block p-3 rounded-lg ${message.role === \"user\" ? \"bg-blue-100 text-blue-900\" : \"bg-gray-100 text-gray-900\"}`,\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"small\",\n            color: \"gray\",\n            placeholder: undefined,\n            className: \"mt-1 text-xs\",\n            children: new Date().toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n        placeholder: undefined,\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            placeholder: \"Type your message here...\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            className: \"flex-grow\",\n            crossOrigin: undefined\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            placeholder: undefined,\n            type: \"submit\",\n            disabled: isLoading,\n            children: isLoading ? \"Thinking...\" : \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatGPT, \"BafHsdwijczbHREsN9kq6NCtkT8=\");\n_c = ChatGPT;\nexport default ChatGPT;\nvar _c;\n$RefreshReg$(_c, \"ChatGPT\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Card","CardBody","CardFooter","Typography","Input","Button","ThreeScene","jsxDEV","_jsxDEV","ChatGPT","_s","messages","setMessages","input","setInput","isLoading","setIsLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSubmit","e","preventDefault","trim","userMessage","role","content","prev","buffer","assistantMessage","eventSource","EventSource","encodeURIComponent","onmessage","event","responseObject","JSON","parse","data","replace","setTimeout","updated","length","onerror","error","console","log","close","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","undefined","map","message","index","variant","color","Date","toLocaleTimeString","ref","onSubmit","type","value","onChange","target","crossOrigin","disabled","_c","$RefreshReg$"],"sources":["/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/Chatbot.tsx"],"sourcesContent":["import React, { FC, useEffect, useState, useRef } from \"react\";\nimport { Card, CardBody, CardFooter, Typography, Input, Button } from \"@material-tailwind/react\";\nimport ThreeScene from \"./ThreeScene\"; // Import the 3D scene\n\ninterface IMessage {\n    role: string;\n    content: string;\n}\n\nconst ChatGPT: FC = () => {\n    const [messages, setMessages] = useState<IMessage[]>([]);\n    const [input, setInput] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n    const messagesEndRef = useRef<null | HTMLDivElement>(null);\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    };\n\n    useEffect(scrollToBottom, [messages]);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!input.trim()) return;\n\n        const userMessage: IMessage = { role: \"user\", content: input };\n        setMessages((prev) => [...prev, userMessage]);\n        setInput(\"\");\n        setIsLoading(true);\n\n        let buffer = \"\";\n        const assistantMessage: IMessage = { role: \"assistant\", content: \"\" };\n        setMessages((prev) => [...prev, assistantMessage]);\n\n        const eventSource = new EventSource(\n            `http://localhost:8000/api/chatbot/?message=${encodeURIComponent(input)}`\n        );\n\n        eventSource.onmessage = (event) => {\n            const responseObject = JSON.parse(event.data);\n            buffer += responseObject.content || \"\";\n\n            buffer = buffer.replace(/\\s+/g, \" \").trim();\n\n            setTimeout(() => {\n                setMessages((prev) => {\n                    const updated = [...prev];\n                    updated[updated.length - 1].content = buffer;\n                    return updated;\n                });\n            }, 100); // 100ms delay, adjust as needed\n        };\n\n        eventSource.onerror = (error) => {\n            console.log(\"Error with SSE connection:\", error);\n            eventSource.close();\n            setIsLoading(false);\n        };\n    };\n\n    return (\n        <div className=\"relative w-full h-[100vh] flex items-center justify-center\">\n            {/* 3D Scene in the background */}\n            <ThreeScene />\n            {/* Chat UI */}\n            <Card placeholder={undefined}\n                className=\"w-full max-w-[800px] h-[80vh] flex flex-col relative z-10 bg-opacity-70 backdrop-blur-lg\">\n                <CardBody placeholder={undefined} className=\"flex-grow overflow-y-auto p-4\">\n                    {messages.map((message, index) => (\n                        <div key={index} className={`mb-4 ${message.role === \"user\" ? \"text-right\" : \"text-left\"}`}>\n                            <Typography\n                                placeholder={undefined}\n                                variant=\"paragraph\"\n                                color={message.role === \"user\" ? \"blue\" : \"gray\"}\n                                className={`inline-block p-3 rounded-lg ${message.role === \"user\" ? \"bg-blue-100 text-blue-900\" : \"bg-gray-100 text-gray-900\"\n                                    }`}\n                            >\n                                {message.content}\n                            </Typography>\n                            <Typography variant=\"small\" color=\"gray\" placeholder={undefined} className=\"mt-1 text-xs\">\n                                {new Date().toLocaleTimeString()}\n                            </Typography>\n                        </div>\n                    ))}\n                    <div ref={messagesEndRef} />\n                </CardBody>\n                <CardFooter placeholder={undefined} className=\"p-4\">\n                    <form onSubmit={handleSubmit} className=\"flex gap-2\">\n                        <Input\n\n                            type=\"text\"\n                            placeholder=\"Type your message here...\"\n                            value={input}\n                            onChange={(e) => setInput(e.target.value)}\n                            className=\"flex-grow\"\n                            crossOrigin={undefined}\n                        />\n                        <Button placeholder={undefined} type=\"submit\" disabled={isLoading}>\n                            {isLoading ? \"Thinking...\" : \"Send\"}\n                        </Button>\n                    </form>\n                </CardFooter>\n            </Card>\n        </div>\n    );\n};\n\nexport default ChatGPT;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
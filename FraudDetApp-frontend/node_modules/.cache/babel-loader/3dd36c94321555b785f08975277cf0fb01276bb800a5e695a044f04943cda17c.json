{"ast":null,"code":"var _jsxFileName = \"/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/RealTimeChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Chart, registerables } from 'chart.js';\nimport 'chartjs-adapter-date-fns';\nimport { Card, CardBody, CardFooter, Typography, Button } from '@material-tailwind/react';\n\n// Register the necessary components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(...registerables);\n// Ensure the props type is applied to the component\nconst RealTimeChart = ({\n  predictions,\n  transactions\n}) => {\n  _s();\n  const [currentPredictions, setCurrentPredictions] = useState(predictions);\n  const [currentTransactions, setCurrentTransactions] = useState(transactions);\n  const [fraudDetected, setFraudDetected] = useState({\n    logistic: false,\n    random_forest: false,\n    xgboost: false\n  });\n  useEffect(() => {\n    const socket = new WebSocket('ws://localhost:8000/ws/fraud_detection/');\n\n    // Handle incoming WebSocket messages\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n\n      // Update state with the new transaction and predictions\n      setCurrentPredictions(prevPredictions => [...prevPredictions, data.predictions]);\n      setCurrentTransactions(prevTransactions => [...prevTransactions, data.transaction]);\n\n      // Check if any model detected fraud\n      if (data.transaction.Class === 1) {\n        setFraudDetected({\n          logistic: data.predictions.logistic > 0.5,\n          random_forest: data.predictions.random_forest > 0.5,\n          xgboost: data.predictions.xgboost > 0.5\n        });\n      }\n    };\n    return () => {\n      socket.close(); // Cleanup when component unmounts\n    };\n  }, []);\n\n  // Generate labels based on the transaction time\n  const timeLabels = currentTransactions.map(t => new Date(t.Time * 1000).toLocaleTimeString());\n\n  // Prepare chart data\n  const data = {\n    labels: timeLabels,\n    datasets: [{\n      label: 'Logistic Regression',\n      data: currentPredictions.map(p => p.logistic),\n      borderColor: 'rgba(75, 192, 192, 1)',\n      backgroundColor: 'rgba(75, 192, 192, 0.2)',\n      fill: false\n    }, {\n      label: 'Random Forest',\n      data: currentPredictions.map(p => p.random_forest),\n      borderColor: 'rgba(153, 102, 255, 1)',\n      backgroundColor: 'rgba(153, 102, 255, 0.2)',\n      fill: false\n    }, {\n      label: 'XGBoost',\n      data: currentPredictions.map(p => p.xgboost),\n      borderColor: 'rgba(255, 159, 64, 1)',\n      backgroundColor: 'rgba(255, 159, 64, 0.2)',\n      fill: false\n    }, {\n      label: 'Transaction Amount',\n      data: currentTransactions.map(t => t.Amount),\n      borderColor: 'rgba(54, 162, 235, 1)',\n      backgroundColor: 'rgba(54, 162, 235, 0.2)',\n      fill: false,\n      yAxisID: 'y2' // Different y-axis for transaction amount\n    }]\n  };\n\n  // Chart options with two y-axes\n  const options = {\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'minute'\n        }\n      },\n      y: {\n        beginAtZero: true,\n        max: 1\n      },\n      y2: {\n        beginAtZero: true,\n        position: 'right'\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    placeholder: true,\n    className: \"w-full h-full\",\n    children: [/*#__PURE__*/_jsxDEV(CardBody, {\n      placeholder: true,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        placeholder: true,\n        variant: \"h5\",\n        color: \"blue-gray\",\n        className: \"mb-2\",\n        children: \"Real-Time Fraud Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        data: data,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), fraudDetected.logistic && /*#__PURE__*/_jsxDEV(Typography, {\n        placeholder: true,\n        color: \"red\",\n        children: \"Logistic Regression: Fraud Detected!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 44\n      }, this), fraudDetected.random_forest && /*#__PURE__*/_jsxDEV(Typography, {\n        placeholder: true,\n        color: \"red\",\n        children: \"Random Forest: Fraud Detected!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 49\n      }, this), fraudDetected.xgboost && /*#__PURE__*/_jsxDEV(Typography, {\n        placeholder: true,\n        color: \"red\",\n        children: \"XGBoost: Fraud Detected!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n      placeholder: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        placeholder: true,\n        color: \"blue\",\n        onClick: () => window.location.reload(),\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 9\n  }, this);\n};\n_s(RealTimeChart, \"5yfnT7nxLMitHlTgclYTRIjcoZA=\");\n_c = RealTimeChart;\nexport default RealTimeChart;\nvar _c;\n$RefreshReg$(_c, \"RealTimeChart\");","map":{"version":3,"names":["React","useState","useEffect","Line","Chart","registerables","Card","CardBody","CardFooter","Typography","Button","jsxDEV","_jsxDEV","register","RealTimeChart","predictions","transactions","_s","currentPredictions","setCurrentPredictions","currentTransactions","setCurrentTransactions","fraudDetected","setFraudDetected","logistic","random_forest","xgboost","socket","WebSocket","onmessage","event","data","JSON","parse","prevPredictions","prevTransactions","transaction","Class","close","timeLabels","map","t","Date","Time","toLocaleTimeString","labels","datasets","label","p","borderColor","backgroundColor","fill","Amount","yAxisID","options","scales","x","type","time","unit","y","beginAtZero","max","y2","position","placeholder","className","children","variant","color","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","_c","$RefreshReg$"],"sources":["/Users/lsofianos/Documents/proj-FraudDetApp/FraudDetApp-frontend/src/components/RealTimeChart.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Chart, registerables, ChartOptions } from 'chart.js';\nimport 'chartjs-adapter-date-fns';\nimport { Card, CardBody, CardFooter, Typography, Button } from '@material-tailwind/react';\n\n// Register the necessary components\nChart.register(...registerables);\n\ninterface Prediction {\n    logistic: number;\n    random_forest: number;\n    xgboost: number;\n}\n\ninterface Transaction {\n    Time: number;\n    Amount: number;\n    V1: number;\n    V2: number;\n    V3: number;\n    V4: number;\n    V5: number;\n    V6: number;\n    V7: number;\n    V8: number;\n    V9: number;\n    V10: number;\n    V11: number;\n    V12: number;\n    V13: number;\n    V14: number;\n    V15: number;\n    V16: number;\n    V17: number;\n    V18: number;\n    V19: number;\n    V20: number;\n    V21: number;\n    V22: number;\n    V23: number;\n    V24: number;\n    V25: number;\n    V26: number;\n    V27: number;\n    V28: number;\n    Class?: number;  // The actual fraud label, if present in your data\n}\n\ninterface RealTimeChartProps {\n    predictions: Prediction[];\n    transactions: Transaction[];\n}\n\n// Ensure the props type is applied to the component\nconst RealTimeChart: React.FC<RealTimeChartProps> = ({ predictions, transactions }) => {\n    const [currentPredictions, setCurrentPredictions] = useState<Prediction[]>(predictions);\n    const [currentTransactions, setCurrentTransactions] = useState<Transaction[]>(transactions);\n    const [fraudDetected, setFraudDetected] = useState<{ logistic: boolean, random_forest: boolean, xgboost: boolean }>({ logistic: false, random_forest: false, xgboost: false });\n\n    useEffect(() => {\n        const socket = new WebSocket('ws://localhost:8000/ws/fraud_detection/');\n\n        // Handle incoming WebSocket messages\n        socket.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n\n            // Update state with the new transaction and predictions\n            setCurrentPredictions((prevPredictions) => [...prevPredictions, data.predictions]);\n            setCurrentTransactions((prevTransactions) => [...prevTransactions, data.transaction]);\n\n            // Check if any model detected fraud\n            if (data.transaction.Class === 1) {\n                setFraudDetected({\n                    logistic: data.predictions.logistic > 0.5,\n                    random_forest: data.predictions.random_forest > 0.5,\n                    xgboost: data.predictions.xgboost > 0.5,\n                });\n            }\n        };\n\n        return () => {\n            socket.close();  // Cleanup when component unmounts\n        };\n    }, []);\n\n    // Generate labels based on the transaction time\n    const timeLabels = currentTransactions.map(t => new Date(t.Time * 1000).toLocaleTimeString());\n\n    // Prepare chart data\n    const data = {\n        labels: timeLabels,\n        datasets: [\n            {\n                label: 'Logistic Regression',\n                data: currentPredictions.map(p => p.logistic),\n                borderColor: 'rgba(75, 192, 192, 1)',\n                backgroundColor: 'rgba(75, 192, 192, 0.2)',\n                fill: false,\n            },\n            {\n                label: 'Random Forest',\n                data: currentPredictions.map(p => p.random_forest),\n                borderColor: 'rgba(153, 102, 255, 1)',\n                backgroundColor: 'rgba(153, 102, 255, 0.2)',\n                fill: false,\n            },\n            {\n                label: 'XGBoost',\n                data: currentPredictions.map(p => p.xgboost),\n                borderColor: 'rgba(255, 159, 64, 1)',\n                backgroundColor: 'rgba(255, 159, 64, 0.2)',\n                fill: false,\n            },\n            {\n                label: 'Transaction Amount',\n                data: currentTransactions.map(t => t.Amount),\n                borderColor: 'rgba(54, 162, 235, 1)',\n                backgroundColor: 'rgba(54, 162, 235, 0.2)',\n                fill: false,\n                yAxisID: 'y2',  // Different y-axis for transaction amount\n            },\n        ],\n    };\n\n    // Chart options with two y-axes\n    const options: ChartOptions<'line'> = {\n        scales: {\n            x: {\n                type: 'time',\n                time: {\n                    unit: 'minute',\n                },\n            },\n            y: {\n                beginAtZero: true,\n                max: 1,\n            },\n            y2: {\n                beginAtZero: true,\n                position: 'right',\n            },\n        },\n    };\n\n    return (\n        <Card placeholder={true} className=\"w-full h-full\">\n            <CardBody placeholder={true}>\n                <Typography placeholder={true} variant=\"h5\" color=\"blue-gray\" className=\"mb-2\">\n                    Real-Time Fraud Detection\n                </Typography>\n                <Line data={data} options={options} />\n                {fraudDetected.logistic && <Typography placeholder={true} color=\"red\">Logistic Regression: Fraud Detected!</Typography>}\n                {fraudDetected.random_forest && <Typography placeholder={true} color=\"red\">Random Forest: Fraud Detected!</Typography>}\n                {fraudDetected.xgboost && <Typography placeholder={true} color=\"red\">XGBoost: Fraud Detected!</Typography>}\n            </CardBody>\n            <CardFooter placeholder={true}>\n                <Button placeholder={true} color=\"blue\" onClick={() => window.location.reload()}>\n                    Refresh\n                </Button>\n            </CardFooter>\n        </Card>\n    );\n};\n\nexport default RealTimeChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}